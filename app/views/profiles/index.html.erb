<!-- Page-->
<div class="house-main" style="background-color: white">
  <div class='container'>
    <div class="row">
      <div class="page text-center">
        <main class="page-content">
          <!-- 4 columns layout-->
                      <section class="section-98 section-sm-110">
              <div class="shell">
                <h2> <%= @profiles.count %> professionnels à votre écoute</h2>
                <hr class="divider divider-lg bg-secondary">
                <div class="offset-top-41 offset-lg-top-60">
                  <div class="range range-xs-center">
                    <% @profiles.each do |profile| %>
                      <div class="cell-xs-8 cell-sm-7 cell-md-3 offset-top-41 offset-md-top-0", style="margin-top: 20px">
                        <!-- Thumbnail Josip-->
                        <figure class="thumbnail-josip odd"><a href="<%= profile_path(profile)%>"><img width="270" height="270" src="https://livedemo00.template-help.com/wt_46574_v1/images/users/user-katherine-wong-270x270.jpg" alt=""/></a>
                          <div class="thumbnail-desc">
                            <h4 class="thumbnail-josip-title text-bold text-white"><%= profile.first_name.capitalize %> <%= profile.last_name.upcase %></h4>
                            <p class="veil reveal-md-block text-italic text-white offset-top-0"><%= profile.city %></p>
                          </div>
                          <figcaption><a <%= link_to 'Voir ce profil', profile_path(profile), class: 'btn btn-block btn-rect text-md-left btn-secondary'%></a></figcaption>
                        </figure>
                      </div>
                    <% end %>
                  </div>
                </div>
              </div>
            </section>
        </main>
      </div>
    </div>
  </div>
  <div class="map-index">
    <div id="map" style="width: 100%; height: 100vh;"></div>
    <% content_for(:after_js) do %>
      <%= javascript_tag do %>
        var handler = Gmaps.build('Google');
        handler.buildMap({ internal: { id: 'map' } }, function() {
          markers = handler.addMarkers(<%= raw @markers.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
          if (markers.length == 0) {
            handler.getMap().setZoom(2);
          } else if (markers.length == 1) {
            handler.getMap().setZoom(14);
          }
        });
      <% end %>
    <% end %>
  </div>
</div>
<!-- Java script-->
<script src="js/core.min.js"></script>
<script src="js/script.js"></script>
